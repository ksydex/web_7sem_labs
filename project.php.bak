<?php
include "db.php";
// Check existence of id parameter before processing further
if(isset($_GET["id"]) && !empty(trim($_GET["id"]))){
    // Include config file


    // Prepare a select statement
    $sql = "SELECT * FROM projects WHERE id = ?";

    if($stmt = mysqli_prepare($db, $sql)){
        // Bind variables to the prepared statement as parameters
        mysqli_stmt_bind_param($stmt, "i", $param_id);

        // Set parameters
        $param_id = trim($_GET["id"]);

        // Attempt to execute the prepared statement
        if(mysqli_stmt_execute($stmt)){
            $result = mysqli_stmt_get_result($stmt);

            if(mysqli_num_rows($result) == 1){
                /* Fetch result row as an associative array. Since the result set
                contains only one row, we don't need to use while loop */
                $row = mysqli_fetch_array($result, MYSQLI_ASSOC);

                // Retrieve individual field value
                $name = $row["name"];
                $description = $row["description"];
                $price = $row["price"];
            } else{
                // URL doesn't contain valid id parameter. Redirect to error page
                header("location: error.php");
                exit();
            }

        } else{
            echo "Oops! Something went wrong. Please try again later.";
        }
    }

    // Close statement
    mysqli_stmt_close($stmt);

    // Close connection
    mysqli_close($db);
} else{
    // URL doesn't contain id parameter. Redirect to error page
    header("location: error.php");
    exit();
}
?>

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ö—É—Ä—Å–æ–≤–æ–π –ø—Ä–æ–µ–∫—Ç</title>
    <link href="styles/main.css" rel="stylesheet">
</head>
<body>
<div class="header-link">
    <h5 class="header-link__text">
        <a href="index.php">‚óÄ –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥</a>
    </h5>
</div>
<h1 class="header-default"><?php echo $name ?></h1>

<h2>–û–ø–∏—Å–∞–Ω–∏–µ</h2>
<div>
    <div class="image-card">
        <img src="./example.png" alt="Example">
        <div class="image-card__info">
            <p><i>–ü—Ä–∏–º–µ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</i></p>
        </div>
    </div>
    <h3>–ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è</h3>
    <ul>
        <li>–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–∏–¥–∞ "–¥–æ—Å–∫–∞"</li>
        <li>–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–∏–¥–∞ "—Ç–∞–π–º–ª–∞–π–Ω"</li>
        <li>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω—è—Ç—å <span style="font-style: italic">—Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á</span></li>
    </ul>
</div>

<h2>–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á</h2>
<table>
    <thead>
    <tr>
        <th>#</th>
        <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
        <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
        <th>–°—Ç–∞—Ç—É—Å</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>1</td>
        <td>–ù–∞–ø–∏—Å–∞—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫ –ü–ó</td>
        <td>–ò—Å–ø–æ–ª—å–∑—É—è MS Office Word</td>
        <td>‚úÖ</td>
    </tr>
    <tr>
        <td>2</td>
        <td>–°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É</td>
        <td>–ò—Å–ø–æ–ª—å–∑—É—è Draw.io</td>
        <td>‚åö</td>
    </tr>
    <tr>
        <td>3</td>
        <td>–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å—Ä–µ–¥—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏</td>
        <td>Apache, MySQL, Webpack</td>
        <td>‚ùå</td>
    </tr>
    <tr>
        <td>4</td>
        <td>–ù–∞–ø–∏—Å–∞—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫ –ü–ó</td>
        <td>–ò—Å–ø–æ–ª—å–∑—É—è MS Office Word</td>
        <td>‚ùå</td>
    </tr>
    </tbody>
</table>

<h2>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h2>
<div style="max-width: 600px">
    <div style="display: flex;">
        <textarea placeholder="–ù–æ–≤—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..." style="width: 100%" rows="3"></textarea>
        <button style="margin-left: 10px">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </div>

    <ul class="comments">
        <li class="comments__card">
            <div class="comments__card__info">
                <p>–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω</p>
                <p>–≤—á–µ—Ä–∞ –≤ 20:06</p>
            </div>

            <hr>

            <p class="comments__text">–û—Ç–ª–∏—á–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç! –¢–∞–∫ –∏ —Å–¥–µ–ª–∞–µ–º! üëç</p>
        </li>
        <li class="comments__card">
            <div class="comments__card__info">
                <p>–ï–ª–µ–Ω–∞ –ê—Ñ–∞–Ω–∞—Å—å–µ–≤–∞</p>
                <p>–≤—á–µ—Ä–∞ –≤ 15:53</p>
            </div>

            <hr>

            <p class="comments__text">–ö–∞–∫ –≤–∞–º —Ç–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç? –ü—Ä–æ—à—É –ø—Ä–æ–≤–µ—Ä–∏—Ç—å...</p>
        </li>
    </ul>
</div>

</body>
</html>